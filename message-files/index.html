<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Message Files - Trubar</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Message Files";
        var mkdocs_page_input_path = "message-files.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Trubar
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../getting-started/">Getting Started</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Message Files</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#file-structure">File Structure</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#translations">Translations</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#comments">Comments</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#quotes">Quotes</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#colons">Colons</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#blocks">Blocks</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../scenarios/">Common Scenarios</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../command-line/">Command Line</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../configuration/">Configuration</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../localization/">Localization Issues</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../questions/">Questions</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Trubar</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
      <li>Message Files</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="message-files">Message Files</h1>
<p><strong>TL;DR:</strong> Look at the example from Getting Started. Read this page only if you run into problems and need details.</p>
<p>Messages are stored in files with extension .jaml. Jaml is a simplified version of Yaml, limited to the functionality needed by Trubar. It does not support lists, flow collections, node anchors, different datatypes... This allows for simpler syntax, in particular less quotes.</p>
<h3 id="file-structure">File Structure</h3>
<p>The first-level keys are file names, with their paths relative to the root passed in the <code>-s</code> option of <code>collect</code> and <code>translate</code>. (It is important to always use the same root for the project. Using <code>-s code/</code> wouldn't only include the strings from <code>setup.py</code>, but also prepend <code>sample</code> to the names of all scanned files!)</p>
<p>Lower levels have keys that</p>
<ul>
<li>start with <code>def</code> or <code>class</code>, and are followed by a subtree that starts in the next line,</li>
<li>
<p>or represents a potentially translatable string, followed by the translation in that same line (except when using <a href="#blocks">blocks</a>).</p>
<p>There is no indication about whether a string is an f-string or not, neither does it show what kind of quotes are used in the source, because none of this matters.</p>
</li>
</ul>
<p>Trubar also reads and writes standard yaml (it distinguishes between yaml and jaml by file extensions), but we don't recommend using it because their formatting is more complex and any comments written by translator are lost at reading.</p>
<h3 id="translations">Translations</h3>
<p>Translator can treat a string in approximately three ways.</p>
<ul>
<li>Provide a translation.</li>
<li>Mark with <code>false</code> to indicate that it <em>must not be</em> translated. An example of such string is <code>"__main__"</code> or <code>"rb"</code> when calling function <code>open</code>.</li>
<li>Mark it with <code>true</code>, if the strings that could be translated, but doesn't need it for this particular language or culture. A common example would be symbols like <code>"©️"</code>.</li>
<li>Leave it <code>null</code> until (s)he figures out what to do with it.</li>
</ul>
<p>The difference between <code>true</code> and <code>false</code> is important only when using this translation to <a href="../scenarios/#preparing-templates">prepare templates</a> for translations into other languages.</p>
<h3 id="comments">Comments</h3>
<p>Comments are useful to indicate questionable translations, brainstorm with other translators or oneself, and similar. Operations on message files, like extracting and merging, keep the comments at their respective places.</p>
<p>A comment is always associated with some particular translation or entire function or class. It must be placed above it and conform to indendation. Comments cannot follow translations in the same line; a <code>#</code> symbol in translation is treated literally.</p>
<h3 id="quotes">Quotes</h3>
<p>Rules for quoting original messages and translations are different. The former - which are produced automatically - require more quotes to make the latter - which are written by human -- simpler. Here are the rules for the latter, that is, translations.</p>
<ul>
<li>
<p>Translations need to be quoted if</p>
<ul>
<li>they begin or end with space,</li>
<li>the translation is (literally) <code>"false"</code>, <code>"true"</code> or <code>"null"</code>,</li>
<li>the actual content of the string begins and ends with a quote of the same type, in which case jaml parser would interpret literal quotes as quotes.</li>
</ul>
<p>You will most likely only encounter the first case.</p>
</li>
<li>
<p>Single- and double-quoted strings are treated the same.</p>
</li>
<li>The translation must begin and end with the same type of quote.</li>
<li>A single-quoted string may contain double quotes and vice-versa; such quotes are treated literally.</li>
<li>Any single (double) quotes within a single (double) quoted strings must be doubled, as in <code>'don''t forget to double the quotes.'</code>.</li>
<li>The quotes used in message files are not related to the quotes used in source code. In the introductory example, all string in code use double quotes, while some strings in the message file are single-quoted and others double quoted, for convenience.</li>
</ul>
<h3 id="colons">Colons</h3>
<p>Colons in translations have no special meaning. Consider the following line from the example.</p>
<pre><code>'Wrong number: {n} is not between 5 and 20.': Napačno število: {n} ni med 5 in 20.
</code></pre>
<p>In standard yaml, the translation would need quotes because it includes a colon followed by space. In Jaml, this rule only applies to keys, which translator doesn't care about. Therefore: use colons at will.</p>
<h3 id="blocks">Blocks</h3>
<p>Multiline strings are usually stored as multiline blocks. These are indicated by using a pipe symbol (<code>|</code>) as the only symbol in the line (for original messages) or after the colon (for translations). The proceeding lines must be indented. The indendation level is arbitrary and is deduced from the first line; if it starts with 20 spaces, the leading 20 spaces will be removed from every following line of the block. The block ends at the first line that is indented by less than the first line of the block.</p>
<p>Here is an actual example.</p>
<pre><code>widgets/data/__init__.py:
    Widgets for data manipulation.: Gradniki za obdelavo podatkov.
    |
        This category contains widgets for data manipulation. This includes
        loading, importing, saving, preprocessing, selection, etc.
    : |
        Kategorija vsebuje gradnike za delo s podatki, na primer branje,
        shranjevanje, spreminjanje, izbiranje in podobno.
</code></pre>
<p>If the first line of translation contains leading spaces and thus cannot serve to indicate the indentation, the indendation must be indicated by a number following the <code>|</code> symbol. E.g., if the first line in indented by 4 additional spaces, the block would begin with <code>|4</code>.</p>
<p>Block messages can be translated with non-block strings and vice-versa.</p>
<p>You will probably only use blocks when the key already uses them. Copy the key and replace the text.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../getting-started/" class="btn btn-neutral float-left" title="Getting Started"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../scenarios/" class="btn btn-neutral float-right" title="Common Scenarios">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../getting-started/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../scenarios/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
